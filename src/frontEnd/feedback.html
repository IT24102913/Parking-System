<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Management System - Feedback</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            light: '#3b82f6',
                            DEFAULT: '#2563eb',
                            dark: '#1d4ed8',
                        },
                        secondary: {
                            light: '#f59e0b',
                            DEFAULT: '#d97706',
                            dark: '#b45309',
                        },
                        dark: {
                            light: '#1e293b',
                            DEFAULT: '#0f172a',
                            dark: '#020617',
                        },
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;

            background: url('wallpaper.jpg') center center/cover no-repeat fixed;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .navbar {
            width: 100%;
            background: rgba(0, 0, 0, 0.95);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 60px;
            height: 70px;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 10;
            box-sizing: border-box;
            box-shadow: 0 2px 16px 0 rgba(31,38,135,0.10);
        }
        .navbar .logo {
            font-size: 1.7rem;
            font-weight: 700;
            letter-spacing: 1px;
        }
        .navbar ul {
            list-style: none;
            display: flex;
            gap: 30px;
            margin: 0;
            padding: 0;
        }
        .navbar ul li { display: inline-block; }
        .navbar ul li a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            transition: color 0.2s;
            padding: 8px 16px;
            border-radius: 8px;
        }
        .navbar ul li a.active,
        .navbar ul li a:hover {
            color: #4e8cff;
            background: rgba(255,255,255,0.07);
        }
        .navbar .login-btn {
            border: 2px solid #fff;
            border-radius: 8px;
            padding: 6px 22px;
            background: transparent;
            color: #fff;
            font-weight: 500;
            margin-left: 20px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .status-pending {
            background-color: rgba(251, 191, 36, 0.1);
            color: #f59e0b;
        }

        .status-resolved {
            background-color: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Overlay styles */
        .overlay {
            background: rgba(255,255,255,0.08);
            border-radius: 15px;
            padding: 40px 36px;
            width: 100%;
            box-sizing: border-box;
            border: 1.5px solid rgba(255,255,255,0.18);
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18);
            z-index: 2;
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            display: flex;
            flex-direction: column;
            height: fit-content;
            min-height: auto;
            overflow: visible;  position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .overlay-content {
            background: rgba(255,255,255,0.08); border: 1.5px solid rgba(255,255,255,0.18);
            box-shadow: 0 4px 24px 0 rgba(31,38,135,0.10);
            border-radius: 18px; padding: 32px; transition: box-shadow 0.2s, transform 0.2s;
            backdrop-filter: blur(100px);
        }

        .overlay.active .overlay-content {
            transform: translateY(0);
        }

        /* Delete confirmation overlay */
        .delete-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 60;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }

        .delete-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .delete-overlay-content {
            background: rgba(255,255,255,0.08); border: 1.5px solid rgba(255,255,255,0.18);
            box-shadow: 0 4px 24px 0 rgba(31,38,135,0.10);
            border-radius: 18px; padding: 32px; transition: box-shadow 0.2s, transform 0.2s;
            backdrop-filter: blur(100px);
        }

        .delete-overlay.active .delete-overlay-content {
            transform: scale(1);
        }

        /* Gradient text for table rows */
        .table-gradient-text {
            background: linear-gradient(90deg, #e0eaff 0%, #ffffff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }

        /* Make all table row text red on hover */
        tbody tr:hover td, tbody tr:hover td * {
            color: #ef4444 !important; /* Tailwind red-500 */
            -webkit-text-fill-color: #ef4444 !important;
        }

        .overlay, .overlay * {
            color: #f3f4f6 !important;
        }

        .overlay .bg-gray-50,
        .overlay .bg-white {
            background: transparent !important;
            border: 1.5px solid #f3f4f6 !important;
        }

        .overlay input,
        .overlay select,
        .overlay textarea {
            background: transparent !important;
            color: #f3f4f6 !important;

        }
        .overlay input::placeholder,
        .overlay textarea::placeholder {
            color: #e5e7eb !important;
        }

        .glass-input {
            background: rgba(255,255,255,0.12) !important;
            backdrop-filter: blur(16px) !important;
            -webkit-backdrop-filter: blur(16px) !important;
            border: none !important;
            color: #f3f4f6 !important;
        }

        .glass-card {
            background: rgba(40, 40, 60, 0.45);
            border-radius: 18px;
            box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            padding: 1.25rem 1.5rem;
            margin: 2rem auto;
            max-width: 1500px;
            width: 100%;
        }
        .nice-table {
            background: #d4def5;
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            color: #f3f4f6;
            font-family: 'Inter', 'sans-serif';
            background: transparent;
            margin-top: 1rem;
        }
        .nice-table th {
            color: #60a5fa;
            font-weight: 700;
            padding: 0.75rem 1rem;
            text-align: left;
            background: transparent;
            font-size: 1rem;
            border-bottom: 2px solid rgba(255,255,255,0.10);
        }
        .nice-table td {
            padding: 0.75rem 1rem;
            background: transparent;
            color: #f3f4f6;
            font-size: 0.98rem;
        }
        .nice-table tbody tr {
            transition: background 0.2s;
        }
        .nice-table tbody tr:nth-child(even) {
            background: rgba(255,255,255,0.03);
        }
        .nice-table tbody tr:nth-child(odd) {
            background: rgba(0,0,0,0.07);
        }
        .nice-table tbody tr:hover {
            background: rgba(96,165,250,0.10);
        }
        .nice-table, .nice-table th, .nice-table td {
            border: none;
        }
        .nice-table td, .nice-table th {
            color: #f3f4f6 !important;
            -webkit-text-fill-color: #f3f4f6 !important;
        }
        .nice-table tbody tr:hover td, .nice-table tbody tr:hover td * {
            color: #60a5fa !important;
            -webkit-text-fill-color: #60a5fa !important;
        }
        select.glass-input, select.glass-input option {
            background: #232336 !important;
            color: #f3f4f6 !important;
        }
    </style>
</head>
<body background="wallpaper.jpg">
<nav class="navbar">
    <div class="logo">ParkingMS</div>
    <ul>
        <li><a href="home.html">Home</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="feedback.html">Feedback</a></li>
        <li><button class="login-btn" onclick="window.location.href='Login.html'">Login</button></li>
    </ul>
</nav>
<div class="container mx-auto px-4 py-8 max-w-7xl" style="padding-top:7rem">
    <!-- Header with floating elements -->
    <div class="flex justify-between items-center mb-8 relative">
        <div class="absolute -top-10 -left-10 w-32 h-32 bg-primary-500 rounded-full opacity-10 blur-xl"></div>
        <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-secondary-500 rounded-full opacity-10 blur-xl"></div>

        <div class="relative">
            <h1 class="text-3xl font-bold text-dark-800" style="color: white">Vehicle <span class="text-primary-600">Feedback</span> Hub</h1>
            <p class="text-gray-500">Manage all vehicle feedback in one place</p>
        </div>

        <div class="relative flex items-center space-x-4">
            <div class="relative">
                <input type="text" placeholder="Search feedback..."
                       class="pl-10 pr-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white shadow-sm transition-all duration-200 w-64">
                <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
            </div>
            <a href="AddFeedback.html" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-all duration-200 shadow-md hover:shadow-lg">
                <i class="fas fa-plus"></i>
                <span>New Feedback</span>
            </a>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="glass-blur rounded-xl p-6 shadow-lg border" style="background: rgba(255,255,255,0.08); border-radius: 15px; border: 1.5px solid rgba(255,255,255,0.18); box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);">
            <div class="flex justify-between items-start">
                <div>
                    <p class="text-gray-500 font-medium">Total Feedback</p>
                    <h3 class="text-3xl font-bold text-dark-800 mt-2">127</h3>
                </div>
                <div class="p-3 rounded-lg bg-blue-50 text-primary-600">
                    <i class="fas fa-comment-alt text-xl"></i>
                </div>
            </div>
            <div class="mt-4 flex items-center text-sm text-green-500">
                <i class="fas fa-arrow-up mr-1"></i>
                <span>12% from last month</span>
            </div>
        </div>

        <div class="glass-blur rounded-xl p-6 shadow-lg border" style="background: rgba(255,255,255,0.08); border-radius: 15px; border: 1.5px solid rgba(255,255,255,0.18); box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);">
            <div class="flex justify-between items-start">
                <div>
                    <p class="text-gray-500 font-medium">Pending</p>
                    <h3 class="text-3xl font-bold text-dark-800 mt-2">42</h3>
                </div>
                <div class="p-3 rounded-lg bg-amber-50 text-amber-500">
                    <i class="fas fa-clock text-xl"></i>
                </div>
            </div>
            <div class="mt-4 flex items-center text-sm text-red-500">
                <i class="fas fa-arrow-down mr-1"></i>
                <span>5% from last month</span>
            </div>
        </div>

        <div class="glass-blur rounded-xl p-6 shadow-lg border" style="background: rgba(255,255,255,0.08); border-radius: 15px; border: 1.5px solid rgba(255,255,255,0.18); box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);">
            <div class="flex justify-between items-start">
                <div>
                    <p class="text-gray-500 font-medium">Resolved</p>
                    <h3 class="text-3xl font-bold text-dark-800 mt-2">85</h3>
                </div>
                <div class="p-3 rounded-lg bg-green-50 text-green-500">
                    <i class="fas fa-check-circle text-xl"></i>
                </div>
            </div>
            <div class="mt-4 flex items-center text-sm text-green-500">
                <i class="fas fa-arrow-up mr-1"></i>
                <span>18% from last month</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="glass-card bg-white rounded-xl shadow-xl overflow-hidden border border-gray-100" style="background: rgba(40,40,60,0.45); border-radius: 18px; padding: 2rem 2.5rem; width: 100%; box-sizing: border-box; border: 1.5px solid rgba(255,255,255,0.18); box-shadow: 0 8px 32px 0 rgba(31,38,135,0.18); z-index: 2; backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); display: flex; flex-direction: column; height: fit-content; min-height: auto; overflow: visible;">
        <!-- Table Header with Filters -->
        <div class="px-6 py-4 border-b border-gray-200 flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0">
            <h2 class="text-xl font-semibold text-dark-800" style="color: #00d2ff">Recent Feedback</h2>
            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 w-full md:w-auto">
                <div class="relative">
                    <select class="appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2 px-4 pr-8 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                        <option>All Vehicles</option>
                        <option>Toyota Camry</option>
                        <option>Ford Transit</option>
                        <option>Honda Civic</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>

                <div class="relative">
                    <select class="appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2 px-4 pr-8 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                        <option>All Status</option>
                        <option>Pending</option>
                        <option>Resolved</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>

                <div class="relative">
                    <select class="appearance-none bg-gray-50 border border-gray-200 text-gray-700 py-2 px-4 pr-8 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                        <option>All Types</option>
                        <option>Maintenance</option>
                        <option>Performance</option>
                        <option>Safety</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
            </div>
        </div>
        <table class="nice-table">
            <thead>
            <tr>
                <th>ID</th>
                <th>Vehicle</th>
                <th>Submitted By</th>
                <th>Date</th>
                <th>Type</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody id="feedbackTableBody">
            <!-- Feedback rows will be inserted here by JS -->
            </tbody>
        </table>
    </div>
</div>

<!-- Edit Feedback Overlay -->
<div id="editOverlay" class="overlay">
    <div class="overlay-content p-6">
        <div class="flex justify-between items-start mb-6">
            <h2 class="text-2xl font-bold text-gray-900">Edit Feedback</h2>
            <button id="closeEditOverlay" class="text-gray-500 hover:text-gray-700 transition-colors">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <form id="editFeedbackForm" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Feedback ID</h3>
                    <p class="text-lg font-semibold text-gray-900" id="editFeedbackId">#FB-001</p>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Submitted On</h3>
                    <p class="text-lg font-semibold text-gray-900" id="editFeedbackDate">May 12, 2025</p>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="text-sm font-medium text-gray-500 mb-1">Status</h3>
                    <select id="editFeedbackStatus" class="glass-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <option value="Pending">Pending</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Resolved">Resolved</option>
                        <option value="Closed">Closed</option>
                    </select>
                </div>
            </div>

            <div class="mb-6">
                <label for="editFeedbackType" class="block text-sm font-medium text-gray-700 mb-1">Feedback Type</label>
                <select id="editFeedbackType" class="glass-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="Maintenance">Maintenance</option>
                    <option value="Performance">Performance</option>
                    <option value="Safety">Safety</option>
                    <option value="Comfort">Comfort</option>
                    <option value="Other">Other</option>
                </select>
            </div>

            <div class="mb-6">
                <label for="editFeedbackDetails" class="block text-sm font-medium text-gray-700 mb-1">Feedback Details</label>
                <textarea id="editFeedbackDetails" rows="5" class="glass-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
            </div>

            <div class="mb-6">
                <label for="editResolutionNotes" class="block text-sm font-medium text-gray-700 mb-1">Resolution Notes</label>
                <textarea id="editResolutionNotes" rows="3" placeholder="Add notes about how this feedback was addressed..." class="glass-input w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
            </div>

            <div class="flex justify-end space-x-3">
                <button type="button" id="cancelEdit" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                    Cancel
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors">
                    Save Changes
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Delete Confirmation Overlay -->
<div id="deleteConfirmOverlay" class="delete-overlay">
    <div class="delete-overlay-content p-5">
        <div class="text-center mb-4">
            <div class="inline-flex items-center justify-center h-12 w-12 rounded-full bg-red-100 text-red-500 mb-4">
                <i class="fas fa-exclamation-triangle text-xl"></i>
            </div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">Confirm Deletion</h3>
            <p class="text-sm text-gray-500" id="deleteConfirmMessage">
                Are you sure you want to delete this feedback? This action cannot be undone.
            </p>
        </div>
        <div class="flex justify-center space-x-3">
            <button id="cancelDelete" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors">
                Cancel
            </button>
            <button id="confirmDelete" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors">
                Delete
            </button>
        </div>
    </div>
</div>

<!-- Feedback Detail Overlay -->
<div id="feedbackOverlay" class="overlay">
    <div class="overlay-content p-6">
        <div class="flex justify-between items-start mb-6">
            <h2 class="text-2xl font-bold text-gray-900" id="overlayTitle">Feedback Details</h2>
            <button id="closeOverlay" class="text-gray-500 hover:text-gray-700 transition-colors">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
            <div class="bg-gray-50 p-4 rounded-2xl glass-effect" style="background: rgba(255,255,255,0.12); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1.5px solid rgba(255,255,255,0.18); border-radius: 22px;">
                <h3 class="text-sm font-medium text-gray-500 mb-1">Feedback ID</h3>
                <p class="text-lg font-semibold text-gray-900" id="feedbackId">#FB-001</p>
            </div>
            <div class="bg-gray-50 p-4 rounded-2xl glass-effect" style="background: rgba(255,255,255,0.12); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1.5px solid rgba(255,255,255,0.18); border-radius: 22px;">
                <h3 class="text-sm font-medium text-gray-500 mb-1">Submitted On</h3>
                <p class="text-lg font-semibold text-gray-900" id="feedbackDate">May 12, 2025</p>
            </div>
            <div class="bg-gray-50 p-4 rounded-2xl glass-effect" style="background: rgba(255,255,255,0.12); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1.5px solid rgba(255,255,255,0.18); border-radius: 22px;">
                <h3 class="text-sm font-medium text-gray-500 mb-1">Status</h3>
                <p class="text-lg font-semibold" id="feedbackStatus">
                    <span class="status-pending px-2 py-1 text-sm rounded-full">Pending</span>
                </p>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <!-- Vehicle Information and Submitted By boxes removed as requested -->
        </div>

        <div class="mb-6">
            <h3 class="text-sm font-medium text-gray-500 mb-3">Feedback Type</h3>
            <div id="feedbackTypeContainer" class="inline-block px-3 py-1 rounded-full text-blue-600 text-sm font-medium">
                Maintenance
            </div>
        </div>

        <div class="mb-6">
            <h3 class="text-sm font-medium text-gray-500 mb-3">Feedback Details</h3>
            <div class="bg-white border border-gray-200 rounded-lg p-4">
                <p class="text-gray-700" id="feedbackDetails">
                    The air conditioning system is not cooling properly. It takes a very long time to cool the car interior, especially during hot days.
                    I've noticed this issue for the past two weeks. The temperature dial is set to the coldest setting, but the air coming out is only slightly cool.
                    Additionally, there's a slight rattling noise coming from the dashboard when the AC is on high.
                </p>
            </div>
        </div>

        <div class="flex justify-end space-x-3">
            <button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                <i class="fas fa-print mr-2"></i>Print
            </button>
            <button class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors">
                <i class="fas fa-check mr-2"></i>Mark as Resolved
            </button>
        </div>
    </div>
</div>

<script>
    // JavaScript to handle the overlay functionality
    document.addEventListener('DOMContentLoaded', function() {
        // FIX: Define global feedbackData array
        window.feedbackData = [];
        const overlay = document.getElementById('feedbackOverlay');
        const closeBtn = document.getElementById('closeOverlay');
        const editButtons = document.querySelectorAll('.fas.fa-edit');
        const deleteButtons = document.querySelectorAll('.fas.fa-trash');
        const deleteOverlay = document.getElementById('deleteConfirmOverlay');
        const cancelDeleteBtn = document.getElementById('cancelDelete');
        const confirmDeleteBtn = document.getElementById('confirmDelete');
        const editOverlay = document.getElementById('editOverlay');
        const closeEditBtn = document.getElementById('closeEditOverlay');
        const cancelEditBtn = document.getElementById('cancelEdit');
        const editForm = document.getElementById('editFeedbackForm');

        let currentDeleteIndex = null;
        let currentEditIndex = null;

        // Add this fetch-and-render logic:
        fetch('http://localhost:8080/api/feedback')
            .then(response => response.json())
            .then(data => {
                // FIX: Store data globally for action handlers
                window.feedbackData = data;
                const tbody = document.getElementById('feedbackTableBody');
                tbody.innerHTML = '';
                data.forEach((fb, idx) => {
                    const statusClass = fb.status && fb.status.toLowerCase() === 'resolved' ? 'status-resolved' : 'status-pending';
                    const typeColor = fb.feedbackType === 'Maintenance' ? 'text-blue-600' :
                                      fb.feedbackType === 'Performance' ? 'text-purple-600' :
                                      fb.feedbackType === 'Safety' ? 'text-red-600' :
                                      fb.feedbackType === 'Comfort' ? 'text-green-600' : '';
                    const feedbackId = fb.id ? fb.id.substring(0, 8) : `FB-${String(idx+1).padStart(3,'0')}`;
                    tbody.innerHTML += `
                        <tr class="hover:bg-gray-50 transition-colors duration-150">
                            <td class="px-6 py-4 whitespace-nowrap table-gradient-text">${feedbackId}</td>
                            <td class="px-6 py-4 whitespace-nowrap table-gradient-text">
                                <div class="text-sm">${fb.vehicleId || ''}</div>
                                <div class="text-xs">${fb.mileage ? 'Mileage: ' + fb.mileage : ''}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap table-gradient-text">
                                <div class="text-sm font-medium">${fb.name || ''}</div>
                                <div class="text-xs">${fb.email || ''}</div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm table-gradient-text">${fb.date || '-'}</td>
                            <td class="px-6 py-4 whitespace-nowrap"><span class="text-xs ${typeColor}">${fb.feedbackType || ''}</span></td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium table-gradient-text">
                                <div class="flex space-x-2">
                                    <button class="text-yellow-600 hover:text-yellow-700 edit-btn"><i class="fas fa-edit"></i></button>
                                    <button class="text-red-600 hover:text-red-900 delete-btn"><i class="fas fa-trash"></i></button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
                // Attach event listeners to the newly created buttons
                const editButtons = document.querySelectorAll('.edit-btn');
                const deleteButtons = document.querySelectorAll('.delete-btn');
                editButtons.forEach((button, index) => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        currentEditIndex = index;
                        // Populate edit form with feedback data
                        const data = feedbackData[index];
                        document.getElementById('editFeedbackId').textContent = data.id;
                        document.getElementById('editFeedbackDate').textContent = data.date;
                        document.getElementById('editFeedbackStatus').value = data.status;
                        document.getElementById('editFeedbackType').value = data.feedbackType;
                        document.getElementById('editFeedbackDetails').value = data.feedbackDetails;
                        // Show edit overlay
                        editOverlay.classList.add('active');
                        document.body.style.overflow = 'hidden';
                    });
                });
                deleteButtons.forEach((button, index) => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        currentDeleteIndex = index;
                        // Update confirmation message with feedback details
                        const data = feedbackData[index];
                        document.getElementById('deleteConfirmMessage').textContent =
                            `Are you sure you want to delete feedback #${data.id} for ${data.vehicle}? This action cannot be undone.`;
                        // Show delete confirmation overlay
                        deleteOverlay.classList.add('active');
                        document.body.style.overflow = 'hidden';
                    });
                });
            });

        // Function to open overlay with specific feedback data
        function openOverlayWithData(index) {
            const data = feedbackData[index];

            // Update overlay content with feedback data
            document.getElementById('feedbackId').textContent = data.id;
            document.getElementById('feedbackDate').textContent = data.date;

            const statusElement = document.getElementById('feedbackStatus');
            statusElement.innerHTML = `<span class="status-${data.status.toLowerCase()} px-2 py-1 text-sm rounded-full">${data.status}</span>`;

            document.getElementById('vehicleName').textContent = data.vehicle;
            document.getElementById('vehicleType').textContent = data.vehicleType;
            document.getElementById('vehiclePlate').textContent = data.licensePlate;
            document.getElementById('vehicleMileage').textContent = data.mileage;

            document.getElementById('submitterName').textContent = data.submitter;
            document.getElementById('submitterEmail').textContent = data.submitterEmail;
            document.getElementById('submitterPhone').textContent = data.submitterPhone;
            document.getElementById('submitterInitials').textContent = data.submitterInitials;

            const initialsContainer = document.getElementById('submitterInitialsContainer');
            initialsContainer.className = `h-12 w-12 rounded-full bg-${data.submitterColor}-100 flex items-center justify-center text-${data.submitterColor}-500 mr-3`;

            const typeContainer = document.getElementById('feedbackTypeContainer');
            typeContainer.className = `inline-block px-3 py-1 rounded-full text-${data.typeColor}-600 text-sm font-medium`;
            typeContainer.textContent = data.feedbackType;

            document.getElementById('feedbackDetails').textContent = data.feedbackDetails;

            // Show the overlay
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent scrolling of background
        }

        // Close overlay when clicking the close button
        closeBtn.addEventListener('click', function() {
            overlay.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
        });

        // Close overlay when clicking outside the content
        overlay.addEventListener('click', function(e) {
            if (e.target === overlay) {
                overlay.classList.remove('active');
                document.body.style.overflow = ''; // Restore scrolling
            }
        });

        // Close overlay when pressing Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (overlay.classList.contains('active')) {
                    overlay.classList.remove('active');
                    document.body.style.overflow = ''; // Restore scrolling
                }
                if (deleteOverlay.classList.contains('active')) {
                    deleteOverlay.classList.remove('active');
                    document.body.style.overflow = ''; // Restore scrolling
                    currentDeleteIndex = null;
                }
                if (editOverlay.classList.contains('active')) {
                    editOverlay.classList.remove('active');
                    document.body.style.overflow = ''; // Restore scrolling
                    currentEditIndex = null;
                }
            }
        });

        // Cancel delete button
        cancelDeleteBtn.addEventListener('click', function() {
            deleteOverlay.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
            currentDeleteIndex = null;
        });

        // Confirm delete button
        confirmDeleteBtn.addEventListener('click', function() {
            if (currentDeleteIndex !== null) {
                const data = feedbackData[currentDeleteIndex];
                // Send DELETE request to backend
                fetch(`http://localhost:8080/api/feedback/${data.id}`, {
                    method: 'DELETE'
                })
                .then(response => {
                    if (response.ok) {
                        alert(`Feedback ${data.id} has been deleted successfully.`);
                        // Remove from UI
                        const tableRows = document.querySelectorAll('tbody tr');
                        if (tableRows[currentDeleteIndex]) {
                            tableRows[currentDeleteIndex].style.display = 'none';
                        }
                        // Optionally remove from feedbackData array
                        feedbackData.splice(currentDeleteIndex, 1);
                        // Close the overlay
                        deleteOverlay.classList.remove('active');
                        document.body.style.overflow = ''; // Restore scrolling
                        currentDeleteIndex = null;
                    } else {
                        alert('Failed to delete feedback. Please try again.');
                    }
                })
                .catch(() => {
                    alert('Failed to delete feedback. Please try again.');
                });
            }
        });

        // Close delete overlay when clicking outside the content
        deleteOverlay.addEventListener('click', function(e) {
            if (e.target === deleteOverlay) {
                deleteOverlay.classList.remove('active');
                document.body.style.overflow = ''; // Restore scrolling
                currentDeleteIndex = null;
            }
        });

        // Close edit overlay when clicking the close button
        closeEditBtn.addEventListener('click', function() {
            editOverlay.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
            currentEditIndex = null;
        });

        // Close edit overlay when clicking the cancel button
        cancelEditBtn.addEventListener('click', function() {
            editOverlay.classList.remove('active');
            document.body.style.overflow = ''; // Restore scrolling
            currentEditIndex = null;
        });

        // Close edit overlay when clicking outside the content
        editOverlay.addEventListener('click', function(e) {
            if (e.target === editOverlay) {
                editOverlay.classList.remove('active');
                document.body.style.overflow = ''; // Restore scrolling
                currentEditIndex = null;
            }
        });

        // Handle edit form submission
        editForm.addEventListener('submit', function(e) {
            e.preventDefault();

            if (currentEditIndex !== null) {
                const data = feedbackData[currentEditIndex];
                const newStatus = document.getElementById('editFeedbackStatus').value;
                const newType = document.getElementById('editFeedbackType').value;
                const newDetails = document.getElementById('editFeedbackDetails').value;

                // Prepare updated feedback object
                const updatedFeedback = {
                    ...data,
                    status: newStatus,
                    feedbackType: newType,
                    feedbackDetails: newDetails
                };

                // Send PUT request to backend
                fetch(`http://localhost:8080/api/feedback/${data.id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(updatedFeedback)
                })
                .then(response => {
                    if (response.ok) {
                        alert(`Feedback ${data.id} has been updated successfully.`);
                        // Optionally update UI here
                        editOverlay.classList.remove('active');
                        document.body.style.overflow = '';
                        currentEditIndex = null;
                    } else {
                        alert('Failed to update feedback. Please try again.');
                    }
                })
                .catch(() => {
                    alert('Failed to update feedback. Please try again.');
                });
            }
        });
    });
</script>

</body>
</html>